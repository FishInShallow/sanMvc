!function(t){t.fn.transformer=function(e){var n={__Effects:new Array("Optimus","Ironhide","Scorponok","Megatron","Starscream","Jazz"),__Columns:7,__Rows:3,__Speed:1e4,__Title_Height:150,__Title_Width:0};return this.each(function(){e&&t.extend(n,e);var i=this,a=new Array,r=new Array,o=!1,s=1,_=1,l=1,h=0;jQuery.fx.interval=20,t(window).load(function(){c(),d(),R()});var c=function(){t(i).parent().append('<div id="loader"></div>'),t("#loader").show()},f=function(){t(i).parent().find("#loader").fadeOut().remove(),t(i).children("DIV").show()},d=function(){t(i).children("DIV").each(function(){t(this).addClass("js_transformer-"+l),a[l]=t(this).find("img").attr("src"),r[l]=t(this).find("p").css({position:"absolute","z-index":"-1"}).html(),t(this).find("p").remove(),t(this).find("img").css({position:"absolute","z-index":"-1"}),l++})},m=function(e,n,i,r,o,_,l){t(".js_transformer-"+e).append("<div class=js_mask-"+s+"></div>"),t(".js_mask-"+s).css({"margin-left":""+_+"px","margin-top":""+l+"px",height:""+n+"px",width:""+i+"px",background:"URL("+a[e]+") no-repeat","background-position":""+r+"px "+o+"px",position:"absolute","float":"left","z-index":"200"}).hide(),s++},u=function(e){t(".js_transformer-"+e).append('<div class="js_title"></div>'),t(".js_transformer-"+e).append('<div class="js_title_content">'+r[e]+"</div>"),t(".js_title_content").css({"margin-left":"0px","margin-top":""+j()+"px",height:""+n.__Title_Height+"px",width:""+v()+"px",position:"absolute","float":"left","z-index":"400"}).hide(),t(".js_title").css({"margin-left":"0px","margin-top":""+j()+"px",height:""+n.__Title_Height+"px",width:""+v()+"px",background:"black",position:"absolute","float":"left",opacity:"0.5","z-index":"300"}).hide()},g=function(){return Math.ceil(t(i).height()/n.__Rows)},p=function(){return Math.ceil(t(i).width()/n.__Columns)},j=function(){return Math.round(t(i).height()-n.__Title_Height)},v=function(){return 0==n.__Title_Width?Math.round(t(i).width()):Math.round(t(i).width()-n.__Title_Width)},w=function(e){var n=0;t(i).children().each(function(){t(this).css({"z-index":""+n}),n++}),1==e?t(".js_transformer-"+e).children().removeAttr("src").attr("src",""+a[t(i).children().length]):t(".js_transformer-"+e).children().removeAttr("src").attr("src",""+a[e-1]),t(".js_transformer-"+e).css({"z-index":"100"})},k=function(t){for(var e=0,i=0,a=1;a<=n.__Rows;a++){for(var r=1;r<=n.__Columns;r++)m(t,g(),p(),-i,-e,i,e),i+=p();i=0,e+=g()}s=1},x=function(e){o?1==e?t(".js_transformer-"+t(i).children().length).children("DIV").remove():t(".js_transformer-"+(e-1)).children("DIV").remove():o=!0},b=function(e){w(e),x(e),u(e),k(e);var a=0,r=Math.round(n.__Speed/2/t(".js_transformer-"+e).children("DIV").length/2),o=Math.round(t(i).children().length/2),s=n.__Rows*n.__Columns*3,_=y(),l=setInterval(function(){try{T(_,a),a==s&&clearInterval(l),I(a,1,o,s),a++}catch(t){}},r)},y=function(){var t=n.__Effects[h];return h==n.__Effects.length&&(h=0),h++,t},T=function(e,n){switch(e){case"Optimus":t(".js_mask-"+z(n,"Right")).animate({width:"toggle",height:"toggle",left:"-=100",opacity:"0.5",top:"+=50"},200),t(".js_mask-"+z(n,"Right")).animate({left:"+=100",opacity:"1",top:"-=50"},200);break;case"Ironhide":t(".js_mask-"+n).animate({width:"toggle",height:"toggle",left:"+=50"},200),t(".js_mask-"+n).animate({left:"-=50"},200);break;case"Scorponok":t(".js_mask-"+n).animate({width:"toggle",height:"toggle",left:"-=50"},200),t(".js_mask-"+n).animate({left:"+=50"},200);break;case"Megatron":t(".js_mask-"+n).slideDown(100),t(".js_mask-"+n).animate({top:"-=50"}),t(".js_mask-"+n).animate({top:"+=50"});break;case"Jazz":t(".js_mask-"+n).show(200),t(".js_mask-"+n).animate({top:"+=100"}),t(".js_mask-"+n).animate({top:"-=100"});break;case"Starscream":t(".js_mask-"+z(n,"Left")).slideUp(),t(".js_mask-"+z(n,"Left")).slideDown();break;default:t(".js_mask-"+z(n,"Left")).animate({width:"toggle",height:"toggle",left:"+=100",top:"-=50"},200),t(".js_mask-"+z(n,"Left")).animate({left:"-=100",top:"+=50"},200)}},z=function(t,e){for(var i=new Array,a=new Array,r=1,o=1,s=1;s<=n.__Rows;s++){i[s]=new Array(n.__Columns);for(var _=1,l=r;l<=n.__Columns+r;l++)i[s][_]=l,_++;i[s].reverse(),r+=n.__Columns}if("Right"==e){for(var h=1;h<=n.__Columns;h++)for(var c=n.__Rows;c>=1;c--)a[o]=i[c][h],o++;return a[t]}if("Left"==e){for(var h=1;h<=n.__Columns;h++)for(var c=1;c<=n.__Rows;c++)a[o]=i[c][h],o++;return a[t]}return"Array"==e?i:void 0},I=function(e,i,a,r){e==i?(t(".js_title").animate({top:"+="+n.__Title_Height}),t(".js_title_content").animate({top:"+="+(n.__Title_Height+10)})):e==a?(t(".js_title").animate({height:"toggle",top:"-="+n.__Title_Height}),t(".js_title_content").animate({height:"toggle",top:"-="+(n.__Title_Height+10)})):e==r&&t(".js_title_content").fadeOut(function(){t(".js_title_content").animate({top:"+="+n.__Title_Height})},function(){t(".js_title").fadeOut(function(){t(".js_title").animate({top:"+="+n.__Title_Height})})})},R=function(){var e=setInterval(function(){f(),b(_),t(i).children().length==_?(_=1,clearInterval(e),R()):_++},n.__Speed,function(){})}})}}(jQuery);